<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>REACTOR</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;500;600;700&family=Press+Start+2P&family=Share+Tech+Mono&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <script src="https://accounts.google.com/gsi/client" async defer></script>
    <style>
        /* –û—Å–Ω–æ–≤–Ω—ã–µ —Å—Ç–∏–ª–∏ */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Orbitron', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            overflow-x: hidden;
            position: relative;
        }

        .particles {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 1;
        }

        .particle {
            position: absolute;
            width: 4px;
            height: 4px;
            background: rgba(255, 255, 255, 0.6);
            border-radius: 50%;
            animation: float 6s ease-in-out infinite;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0px) rotate(0deg); opacity: 1; }
            50% { transform: translateY(-20px) rotate(180deg); opacity: 0.5; }
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            position: relative;
            z-index: 2;
        }

        .header {
            text-align: center;
            margin-bottom: 30px;
            animation: pulse 2s ease-in-out infinite;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.02); }
        }

        .header h1 {
            font-family: 'Press Start 2P', cursive;
            color: #fff;
            font-size: 2.5em;
            text-shadow: 0 0 20px rgba(255, 255, 255, 0.8);
            margin-bottom: 10px;
        }

        .auth-section {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-bottom: 30px;
            flex-wrap: wrap;
        }

        .btn {
            padding: 12px 24px;
            border: none;
            border-radius: 25px;
            cursor: pointer;
            font-family: 'Orbitron', sans-serif;
            font-weight: 600;
            transition: all 0.3s ease;
            text-decoration: none;
            display: inline-block;
            text-align: center;
        }

        .btn-primary {
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
        }

        .btn-secondary {
            background: linear-gradient(45deg, #f093fb, #f5576c);
            color: white;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.4);
        }

        .btn:active {
            transform: translateY(0);
        }

        .game-section {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            padding: 30px;
            margin: 20px 0;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
        }

        .game-section h2 {
            color: white;
            margin-bottom: 20px;
            font-size: 1.8em;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .stat-card {
            background: rgba(255, 255, 255, 0.15);
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            transition: transform 0.3s ease;
        }

        .stat-card:hover {
            transform: translateY(-5px);
            background: rgba(255, 255, 255, 0.2);
        }

        .stat-card h3 {
            color: #fff;
            margin-bottom: 10px;
            font-size: 1.2em;
        }

        .stat-card p {
            color: #fff;
            font-size: 1.5em;
            font-weight: bold;
        }

        .board {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 8px;
            max-width: 500px;
            margin: 0 auto 20px;
        }

        .cell {
            width: 80px;
            height: 80px;
            border: 2px solid #ddd;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            background: rgba(255, 255, 255, 0.2);
        }

        .cell:hover {
            transform: scale(1.05);
            background: rgba(255, 255, 255, 0.3);
            box-shadow: 0 0 20px rgba(255, 255, 255, 0.4);
        }

        .cell.player1 {
            background: linear-gradient(45deg, #ff6b6b, #ee5a52);
            color: white;
            animation: pulse-border 2s infinite;
        }

        .cell.player2 {
            background: linear-gradient(45deg, #4ecdc4, #44a08d);
            color: white;
            animation: pulse-border 2s infinite;
        }

        .cell.player3 {
            background: linear-gradient(45deg, #45b7d1, #96c93d);
            color: white;
            animation: pulse-border 2s infinite;
        }

        .cell.player4 {
            background: linear-gradient(45deg, #f9ca24, #f0932b);
            color: white;
            animation: pulse-border 2s infinite;
        }

        @keyframes pulse-border {
            0%, 100% { box-shadow: 0 0 10px currentColor; }
            50% { box-shadow: 0 0 20px currentColor; }
        }

        .dice-throw {
            font-size: 2em;
            text-align: center;
            margin: 20px 0;
            animation: throw 0.5s ease-in-out;
        }

        @keyframes throw {
            0% { transform: rotate(0deg) scale(1); }
            50% { transform: rotate(180deg) scale(1.2); }
            100% { transform: rotate(360deg) scale(1); }
        }

        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.8);
            animation: fadeIn 0.3s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .modal-content {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            margin: 15% auto;
            padding: 30px;
            border-radius: 15px;
            width: 90%;
            max-width: 500px;
            text-align: center;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5);
            animation: slideIn 0.3s ease;
        }

        @keyframes slideIn {
            from { transform: translateY(-50px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }

        .modal h2 {
            color: white;
            margin-bottom: 20px;
            font-size: 1.8em;
        }

        .modal p {
            color: white;
            margin-bottom: 20px;
            line-height: 1.6;
        }

        .close {
            color: #aaa;
            float: right;
            font-size: 28px;
            font-weight: bold;
            cursor: pointer;
            transition: color 0.3s ease;
        }

        .close:hover {
            color: white;
        }

        .user-info {
            background: rgba(255, 255, 255, 0.15);
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
            text-align: center;
        }

        .avatar {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            margin: 0 auto 10px;
            background: linear-gradient(45deg, #667eea, #764ba2);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            font-size: 24px;
        }

        .user-info h3 {
            color: white;
            margin-bottom: 10px;
        }

        .division-badge {
            display: inline-block;
            padding: 5px 15px;
            border-radius: 20px;
            font-weight: bold;
            margin: 5px;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .silver { background: linear-gradient(45deg, #c0c0c0, #a9a9a9); }
        .gold { background: linear-gradient(45deg, #ffd700, #daa520); }
        .platinum { background: linear-gradient(45deg, #e5e4e2, #d3d3d3); }

        .season-timer {
            background: rgba(255, 255, 255, 0.15);
            padding: 15px;
            border-radius: 10px;
            margin: 20px 0;
            text-align: center;
            color: white;
            font-family: 'Share Tech Mono', monospace;
        }

        .leaderboard-section {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            padding: 30px;
            margin: 20px 0;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
        }

        .leaderboard-section h2 {
            color: white;
            margin-bottom: 20px;
            font-size: 1.8em;
        }

        .leaderboard {
            max-height: 400px;
            overflow-y: auto;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            padding: 20px;
        }

        .leaderboard-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px;
            margin: 5px 0;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 5px;
        }

        .leaderboard-item.current-user {
            background: rgba(255, 255, 255, 0.2);
            border: 2px solid gold;
        }

        .season-winner-badge {
            background: linear-gradient(45deg, gold, orange);
            color: #333;
            padding: 2px 8px;
            border-radius: 10px;
            font-size: 0.8em;
            font-weight: bold;
            margin-left: 10px;
        }

        .season-progress {
            width: 100%;
            height: 20px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 10px;
            overflow: hidden;
            margin: 10px 0;
        }

        .season-progress-bar {
            height: 100%;
            background: linear-gradient(90deg, #ffd700, #ff6b6b);
            transition: width 0.3s ease;
        }

        .season-title {
            font-size: 1.2em;
            font-weight: bold;
            color: white;
            margin-bottom: 10px;
        }

        .season-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }

        .season-stat {
            background: rgba(255, 255, 255, 0.15);
            padding: 15px;
            border-radius: 10px;
            text-align: center;
        }

        .season-stat h4 {
            color: white;
            margin-bottom: 5px;
        }

        .season-stat .value {
            color: gold;
            font-size: 1.5em;
            font-weight: bold;
        }

        .division-selector {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin: 20px 0;
        }

        .division-btn {
            padding: 10px 20px;
            border: 2px solid transparent;
            border-radius: 25px;
            cursor: pointer;
            font-family: 'Orbitron', sans-serif;
            font-weight: 600;
            transition: all 0.3s ease;
        }

        .division-btn.active {
            border-color: white;
            box-shadow: 0 0 20px currentColor;
        }

        .silver-btn { background: linear-gradient(45deg, #c0c0c0, #a9a9a9); }
        .gold-btn { background: linear-gradient(45deg, #ffd700, #daa520); }
        .platinum-btn { background: linear-gradient(45deg, #e5e4e2, #d3d3d3); }

        .game-mode-section {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            padding: 30px;
            margin: 20px 0;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
        }

        .game-mode-section h2 {
            color: white;
            margin-bottom: 20px;
            font-size: 1.8em;
        }

        .game-modes {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
        }

        .game-mode-card {
            background: rgba(255, 255, 255, 0.15);
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            transition: transform 0.3s ease;
        }

        .game-mode-card:hover {
            transform: translateY(-5px);
            background: rgba(255, 255, 255, 0.2);
        }

        .game-mode-card h3 {
            color: #fff;
            margin-bottom: 10px;
            font-size: 1.2em;
        }

        .game-mode-card p {
            color: #fff;
            margin-bottom: 15px;
            line-height: 1.4;
        }

        .season-winner {
            background: linear-gradient(45deg, gold, orange);
            color: #333;
            padding: 5px 10px;
            border-radius: 20px;
            font-weight: bold;
            font-size: 0.9em;
        }

        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 15px 20px;
            background: rgba(0, 0, 0, 0.8);
            color: white;
            border-radius: 10px;
            z-index: 2000;
            animation: slideInRight 0.3s ease;
        }

        @keyframes slideInRight {
            from { transform: translateX(100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }

        .notification.success { background: rgba(46, 204, 113, 0.9); }
        .notification.error { background: rgba(231, 76, 60, 0.9); }
        .notification.info { background: rgba(52, 152, 219, 0.9); }

        .matchmaking-info {
            background: rgba(255, 255, 255, 0.15);
            padding: 15px;
            border-radius: 10px;
            margin: 20px 0;
            text-align: center;
            color: white;
        }

        .matchmaking-info p {
            margin: 5px 0;
        }
    </style>
</head>
<body>
    <div class="particles" id="particles"></div>
    
    <div class="container">
        <div class="header">
            <h1>REACTOR</h1>
        </div>

        <div class="auth-section">
            <button class="btn btn-primary" onclick="showAuthSection()">–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è</button>
            <button class="btn btn-secondary" onclick="showGameSection()">–ò–≥—Ä–∞—Ç—å</button>
            <button class="btn btn-secondary" onclick="showLeaderboards()">–¢–∞–±–ª–∏—Ü—ã –ª–∏–¥–µ—Ä–æ–≤</button>
        </div>

        <div id="authSection" style="display: none;">
            <div class="game-section">
                <h2>–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å!</h2>
                <div id="googleSignIn" style="display: block;">
                    <div id="g_id_onload"
                        data-client_id="1068124944105-kv887q5qg3g1357q5qg3g1357q5qg3g1.apps.googleusercontent.com"
                        data-callback="handleCredentialResponse"
                        data-auto_prompt="false">
                    </div>
                    <div class="g_id_signin"
                        data-type="standard"
                        data-shape="rectangular"
                        data-theme="outline"
                        data-text="sign_in_with"
                        data-size="large"
                        data-logo_alignment="left">
                    </div>
                </div>
                <div id="userInfo" style="display: none;">
                    <div class="user-info">
                        <div class="avatar" id="userAvatar">U</div>
                        <h3 id="userName">–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å</h3>
                        <div id="userDivision" class="division-badge silver">–°–µ—Ä–µ–±—Ä–æ</div>
                        <div id="seasonWinnerBadge" class="season-winner-badge" style="display: none;">–ü–æ–±–µ–¥–∏—Ç–µ–ª—å —Å–µ–∑–æ–Ω–∞!</div>
                        <div class="season-timer">
                            <div class="season-title">–¢–µ–∫—É—â–∏–π —Å–µ–∑–æ–Ω: <span id="currentSeason">1</span></div>
                            <div class="season-progress">
                                <div class="season-progress-bar" id="seasonProgress" style="width: 30%;"></div>
                            </div>
                            <div>–î–æ –∫–æ–Ω—Ü–∞ —Å–µ–∑–æ–Ω–∞: <span id="seasonTimeLeft">7–¥ 0—á 0–º</span></div>
                        </div>
                    </div>
                    <button class="btn btn-primary" onclick="logout()">–í—ã–π—Ç–∏</button>
                </div>
            </div>
        </div>

        <div id="gameSection" style="display: none;">
            <div class="game-mode-section">
                <h2>–†–µ–∂–∏–º—ã –∏–≥—Ä—ã</h2>
                <div class="game-modes">
                    <div class="game-mode-card">
                        <h3>–û–±—ã—á–Ω–∞—è –∏–≥—Ä–∞</h3>
                        <p>–ò–≥—Ä–∞ —Å –¥—Ä—É–∑—å—è–º–∏ –∏–ª–∏ —Å–ª—É—á–∞–π–Ω—ã–º–∏ –∏–≥—Ä–æ–∫–∞–º–∏</p>
                        <button class="btn btn-primary" onclick="startGame('normal')">–ò–≥—Ä–∞—Ç—å</button>
                    </div>
                    <div class="game-mode-card">
                        <h3>–†–µ–π—Ç–∏–Ω–≥–æ–≤—ã–π —Ä–µ–∂–∏–º</h3>
                        <p>–°–µ–∑–æ–Ω–Ω—ã–π —Ä–µ–π—Ç–∏–Ω–≥ —Å –¥–∏–≤–∏–∑–∏–æ–Ω–∞–º–∏</p>
                        <button class="btn btn-primary" onclick="startGame('rating')" id="ratingBtn" disabled>–ò–≥—Ä–∞—Ç—å</button>
                    </div>
                    <div class="game-mode-card">
                        <h3>–ü—Ä–æ—Ç–∏–≤ –±–æ—Ç–∞</h3>
                        <p>–¢—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞ —Å –ò–ò</p>
                        <button class="btn btn-primary" onclick="startGame('bot')">–ò–≥—Ä–∞—Ç—å</button>
                    </div>
                </div>
            </div>

            <div class="matchmaking-info" id="matchmakingInfo" style="display: none;">
                <p>–ü–æ–∏—Å–∫ —Å–æ–ø–µ—Ä–Ω–∏–∫–∞ –≤ –≤–∞—à–µ–º –¥–∏–≤–∏–∑–∏–æ–Ω–µ...</p>
                <p>–î–∏–≤–∏–∑–∏–æ–Ω: <span id="currentDivisionName">–°–µ—Ä–µ–±—Ä–æ</span></p>
            </div>

            <div class="game-section" id="gameBoard" style="display: none;">
                <div id="diceThrow" class="dice-throw"></div>
                <div class="board" id="board"></div>
                <div style="text-align: center; margin-top: 20px;">
                    <button class="btn btn-secondary" onclick="resetGame()">–ù–æ–≤–∞—è –∏–≥—Ä–∞</button>
                </div>
            </div>
        </div>

        <div id="leaderboards" style="display: none;">
            <div class="leaderboard-section">
                <h2>–¢–∞–±–ª–∏—Ü—ã –ª–∏–¥–µ—Ä–æ–≤</h2>
                <div class="division-selector">
                    <button class="btn division-btn silver-btn" onclick="showDivisionLeaderboard('silver')">–°–µ—Ä–µ–±—Ä–æ</button>
                    <button class="btn division-btn gold-btn" onclick="showDivisionLeaderboard('gold')">–ó–æ–ª–æ—Ç–æ</button>
                    <button class="btn division-btn platinum-btn" onclick="showDivisionLeaderboard('platinum')">–ü–ª–∞—Ç–∏–Ω–∞</button>
                </div>
                <div class="season-stats">
                    <div class="season-stat">
                        <h4>–í—Å–µ–≥–æ –∏–≥—Ä</h4>
                        <div class="value" id="totalGames">0</div>
                    </div>
                    <div class="season-stat">
                        <h4>–ü–æ–±–µ–¥</h4>
                        <div class="value" id="totalWins">0</div>
                    </div>
                    <div class="season-stat">
                        <h4>–†–µ–π—Ç–∏–Ω–≥</h4>
                        <div class="value" id="currentRating">0</div>
                    </div>
                </div>
                <div class="leaderboard" id="leaderboardContent">
                    <!-- –°–æ–¥–µ—Ä–∂–∏–º–æ–µ —Ç–∞–±–ª–∏—Ü—ã –±—É–¥–µ—Ç –∑–∞–≥—Ä—É–∂–∞—Ç—å—Å—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
                </div>
            </div>
        </div>
    </div>

    <div id="winModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal('winModal')">&times;</span>
            <h2>–ü–æ–∑–¥—Ä–∞–≤–ª—è–µ–º!</h2>
            <p id="winMessage">–í—ã –≤—ã–∏–≥—Ä–∞–ª–∏ –∏–≥—Ä—É!</p>
            <button class="btn btn-primary" onclick="closeModal('winModal')">–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å</button>
        </div>
    </div>

    <div id="seasonEndModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal('seasonEndModal')">&times;</span>
            <h2>–°–µ–∑–æ–Ω –∑–∞–≤–µ—Ä—à–µ–Ω!</h2>
            <p id="seasonEndMessage">–°–µ–∑–æ–Ω 1 –∑–∞–≤–µ—Ä—à–µ–Ω. –ü–æ–∑–¥—Ä–∞–≤–ª—è–µ–º –ø–æ–±–µ–¥–∏—Ç–µ–ª–µ–π!</p>
            <div id="seasonWinnerInfo"></div>
            <button class="btn btn-primary" onclick="closeModal('seasonEndModal')">–ó–∞–∫—Ä—ã—Ç—å</button>
        </div>
    </div>

    <script>
        // –ì–ª–æ–±–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
        let currentUser = null;
        let gameBoard = [];
        let currentPlayer = 1;
        let gameMode = 'normal';
        let seasonData = {
            current: 1,
            startTime: new Date(),
            endTime: new Date(Date.now() + 7 * 24 * 60 * 60 * 1000), // 7 –¥–Ω–µ–π
            winners: {}
        };
        let playerStats = {
            wins: 0,
            losses: 0,
            draws: 0,
            rating: 1000,
            division: 'silver',
            seasonWins: 0,
            seasonLosses: 0,
            matchesThisSeason: 0
        };

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
        function init() {
            createParticles();
            loadUserData();
            updateSeasonTimer();
            setInterval(updateSeasonTimer, 60000); // –û–±–Ω–æ–≤–ª—è–µ–º —Ç–∞–π–º–µ—Ä –∫–∞–∂–¥—É—é –º–∏–Ω—É—Ç—É
        }

        // –°–æ–∑–¥–∞–Ω–∏–µ –∞–Ω–∏–º–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —á–∞—Å—Ç–∏—Ü —Ñ–æ–Ω–∞
        function createParticles() {
            const particlesContainer = document.getElementById('particles');
            for (let i = 0; i < 50; i++) {
                const particle = document.createElement('div');
                particle.className = 'particle';
                particle.style.left = Math.random() * 100 + '%';
                particle.style.top = Math.random() * 100 + '%';
                particle.style.animationDelay = Math.random() * 6 + 's';
                particle.style.width = Math.random() * 4 + 2 + 'px';
                particle.style.height = particle.style.width;
                particlesContainer.appendChild(particle);
            }
        }

        // –ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
        function loadUserData() {
            const savedUser = localStorage.getItem('reactorUser');
            if (savedUser) {
                currentUser = JSON.parse(savedUser);
                updateUserInterface();
            }
            
            const savedStats = localStorage.getItem('playerStats');
            if (savedStats) {
                playerStats = JSON.parse(savedStats);
            }
            
            const savedSeason = localStorage.getItem('seasonData');
            if (savedSeason) {
                seasonData = JSON.parse(savedSeason);
            }
        }

        // –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
        function saveUserData() {
            if (currentUser) {
                localStorage.setItem('reactorUser', JSON.stringify(currentUser));
            }
            localStorage.setItem('playerStats', JSON.stringify(playerStats));
            localStorage.setItem('seasonData', JSON.stringify(seasonData));
        }

        // –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—Ç–≤–µ—Ç–∞ –æ—Ç Google
        function handleCredentialResponse(response) {
            try {
                const credential = response.credential;
                const payload = JSON.parse(atob(credential));
                
                currentUser = {
                    id: payload.sub,
                    name: payload.name,
                    email: payload.email,
                    avatar: payload.picture
                };
                
                // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –Ω–∞—á–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
                if (!playerStats.division) {
                    playerStats.division = 'silver';
                    playerStats.rating = 1000;
                }
                
                saveUserData();
                updateUserInterface();
                
                showNotification('–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ REACTOR!', 'success');
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ –ø—Ä–∏ –æ–±—Ä–∞–±–æ—Ç–∫–µ –¥–∞–Ω–Ω—ã—Ö Google:', error);
                showNotification('–û—à–∏–±–∫–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏', 'error');
            }
        }

        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
        function updateUserInterface() {
            if (!currentUser) return;
            
            document.getElementById('googleSignIn').style.display = 'none';
            document.getElementById('userInfo').style.display = 'block';
            
            document.getElementById('userName').textContent = currentUser.name;
            document.getElementById('userAvatar').textContent = currentUser.name.charAt(0).toUpperCase();
            
            const divisionElement = document.getElementById('userDivision');
            divisionElement.textContent = getDivisionName(playerStats.division);
            divisionElement.className = 'division-badge ' + playerStats.division;
            
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º, —è–≤–ª—è–µ—Ç—Å—è –ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–æ–±–µ–¥–∏—Ç–µ–ª–µ–º —Å–µ–∑–æ–Ω–∞
            const seasonWinnerBadge = document.getElementById('seasonWinnerBadge');
            if (seasonData.winners[seasonData.current] === currentUser.id) {
                seasonWinnerBadge.style.display = 'inline-block';
            } else {
                seasonWinnerBadge.style.display = 'none';
            }
            
            // –û–±–Ω–æ–≤–ª—è–µ–º –∫–Ω–æ–ø–∫—É —Ä–µ–π—Ç–∏–Ω–≥–æ–≤–æ–π –∏–≥—Ä—ã
            const ratingBtn = document.getElementById('ratingBtn');
            if (playerStats.division !== 'unranked') {
                ratingBtn.disabled = false;
                ratingBtn.textContent = `–†–µ–π—Ç–∏–Ω–≥ (${getDivisionName(playerStats.division)})`;
            } else {
                ratingBtn.disabled = true;
                ratingBtn.textContent = '–†–µ–π—Ç–∏–Ω–≥ (–ü—Ä–æ–π–¥–∏—Ç–µ –∫–≤–∞–ª–∏—Ñ–∏–∫–∞—Ü–∏—é)';
            }
        }

        // –ü–æ–ª—É—á–µ–Ω–∏–µ –Ω–∞–∑–≤–∞–Ω–∏—è –¥–∏–≤–∏–∑–∏–æ–Ω–∞
        function getDivisionName(division) {
            const names = {
                'silver': '–°–µ—Ä–µ–±—Ä–æ',
                'gold': '–ó–æ–ª–æ—Ç–æ',
                'platinum': '–ü–ª–∞—Ç–∏–Ω–∞',
                'diamond': '–ê–ª–º–∞–∑',
                'master': '–ú–∞—Å—Ç–µ—Ä',
                'grandmaster': '–ì—Ä–∞–Ω–¥–º–∞—Å—Ç–µ—Ä'
            };
            return names[division] || division;
        }

        // –ü–æ–∫–∞–∑–∞—Ç—å —Å–µ–∫—Ü–∏—é –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
        function showAuthSection() {
            document.getElementById('authSection').style.display = 'block';
            document.getElementById('gameSection').style.display = 'none';
            document.getElementById('leaderboards').style.display = 'none';
        }

        // –ü–æ–∫–∞–∑–∞—Ç—å –∏–≥—Ä–æ–≤—É—é —Å–µ–∫—Ü–∏—é
        function showGameSection() {
            if (!currentUser) {
                showNotification('–°–Ω–∞—á–∞–ª–∞ –∞–≤—Ç–æ—Ä–∏–∑—É–π—Ç–µ—Å—å', 'error');
                return;
            }
            document.getElementById('authSection').style.display = 'none';
            document.getElementById('gameSection').style.display = 'block';
            document.getElementById('leaderboards').style.display = 'none';
        }

        // –ü–æ–∫–∞–∑–∞—Ç—å —Ç–∞–±–ª–∏—Ü—ã –ª–∏–¥–µ—Ä–æ–≤
        function showLeaderboards() {
            if (!currentUser) {
                showNotification('–°–Ω–∞—á–∞–ª–∞ –∞–≤—Ç–æ—Ä–∏–∑—É–π—Ç–µ—Å—å', 'error');
                return;
            }
            document.getElementById('authSection').style.display = 'none';
            document.getElementById('gameSection').style.display = 'none';
            document.getElementById('leaderboards').style.display = 'block';
            showDivisionLeaderboard(playerStats.division);
        }

        // –ü–æ–∫–∞–∑–∞—Ç—å —Ç–∞–±–ª–∏—Ü—É –ª–∏–¥–µ—Ä–æ–≤ –¥–∏–≤–∏–∑–∏–æ–Ω–∞
        function showDivisionLeaderboard(division) {
            const leaderboardContent = document.getElementById('leaderboardContent');
            const divisionName = getDivisionName(division);
            
            // –ó–∞–≥–æ–ª–æ–≤–æ–∫ –¥–∏–≤–∏–∑–∏–æ–Ω–∞
            let html = `<h3>${divisionName}</h3>`;
            
            // –°–∏–º—É–ª—è—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö –ª–∏–¥–µ—Ä–±–æ—Ä–¥–∞
            const leaderboard = generateLeaderboard(division);
            
            leaderboard.forEach((player, index) => {
                const isCurrentUser = player.id === currentUser.id;
                const isSeasonWinner = seasonData.winners[seasonData.current] === player.id;
                
                html += `
                    <div class="leaderboard-item ${isCurrentUser ? 'current-user' : ''}">
                        <div>
                            <span style="color: gold; font-weight: bold;">#${index + 1}</span>
                            <span>${player.name}</span>
                            ${isSeasonWinner ? '<span class="season-winner">üèÜ</span>' : ''}
                        </div>
                        <div>
                            <span>–†–µ–π—Ç–∏–Ω–≥: ${player.rating}</span>
                            <span style="margin-left: 10px;">–ü–æ–±–µ–¥: ${player.wins}</span>
                        </div>
                    </div>
                `;
            });
            
            leaderboardContent.innerHTML = html;
            
            // –û–±–Ω–æ–≤–ª—è–µ–º —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É
            document.getElementById('totalGames').textContent = playerStats.wins + playerStats.losses + playerStats.draws;
            document.getElementById('totalWins').textContent = playerStats.wins;
            document.getElementById('currentRating').textContent = playerStats.rating;
        }

        // –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö —Ç–∞–±–ª–∏—Ü—ã –ª–∏–¥–µ—Ä–æ–≤
        function generateLeaderboard(division) {
            const players = [];
            const divisions = {
                'silver': { min: 0, max: 1200 },
                'gold': { min: 1200, max: 1500 },
                'platinum': { min: 1500, max: 2000 }
            };
            
            const range = divisions[division];
            
            // –î–æ–±–∞–≤–ª—è–µ–º —Ç–µ–∫—É—â–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
            players.push({
                id: currentUser.id,
                name: currentUser.name,
                rating: playerStats.rating,
                wins: playerStats.wins
            });
            
            // –î–æ–±–∞–≤–ª—è–µ–º —Å–∏–º—É–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –∏–≥—Ä–æ–∫–æ–≤
            for (let i = 0; i < 19; i++) {
                players.push({
                    id: `bot${i}`,
                    name: `–ë–æ—Ç ${i + 1}`,
                    rating: Math.floor(Math.random() * (range.max - range.min) + range.min),
                    wins: Math.floor(Math.random() * 100)
                });
            }
            
            // –°–æ—Ä—Ç–∏—Ä—É–µ–º –ø–æ —Ä–µ–π—Ç–∏–Ω–≥—É
            players.sort((a, b) => b.rating - a.rating);
            
            return players;
        }

        // –ù–∞—á–∞—Ç—å –∏–≥—Ä—É
        function startGame(mode) {
            if (!currentUser) {
                showNotification('–°–Ω–∞—á–∞–ª–∞ –∞–≤—Ç–æ—Ä–∏–∑—É–π—Ç–µ—Å—å', 'error');
                return;
            }
            
            if (mode === 'rating' && playerStats.division === 'unranked') {
                showNotification('–ü—Ä–æ–π–¥–∏—Ç–µ –∫–≤–∞–ª–∏—Ñ–∏–∫–∞—Ü–∏–æ–Ω–Ω—ã–µ –∏–≥—Ä—ã', 'error');
                return;
            }
            
            gameMode = mode;
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –ø–æ–∏—Å–∫–µ —Å–æ–ø–µ—Ä–Ω–∏–∫–∞ –≤ —Ä–µ–π—Ç–∏–Ω–≥–æ–≤–æ–º —Ä–µ–∂–∏–º–µ
            if (mode === 'rating') {
                document.getElementById('matchmakingInfo').style.display = 'block';
                document.getElementById('currentDivisionName').textContent = getDivisionName(playerStats.division);
                
                // –°–∏–º—É–ª—è—Ü–∏—è –ø–æ–∏—Å–∫–∞ —Å–æ–ø–µ—Ä–Ω–∏–∫–∞
                setTimeout(() => {
                    initGame();
                    document.getElementById('gameBoard').style.display = 'block';
                }, 2000);
            } else {
                initGame();
                document.getElementById('gameBoard').style.display = 'block';
            }
        }

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∏–≥—Ä—ã
        function initGame() {
            gameBoard = Array(5).fill().map(() => Array(5).fill({ player: 0, count: 0 }));
            currentPlayer = 1;
            renderBoard();
        }

        // –†–µ–Ω–¥–µ—Ä–∏–Ω–≥ –¥–æ—Å–∫–∏
        function renderBoard() {
            const boardElement = document.getElementById('board');
            boardElement.innerHTML = '';
            
            for (let row = 0; row < 5; row++) {
                for (let col = 0; col < 5; col++) {
                    const cell = document.createElement('div');
                    cell.className = 'cell';
                    if (gameBoard[row][col].player !== 0) {
                        cell.classList.add(`player${gameBoard[row][col].player}`);
                        cell.textContent = gameBoard[row][col].count;
                    }
                    cell.dataset.row = row;
                    cell.dataset.col = col;
                    cell.addEventListener('click', () => handleCellClick(row, col));
                    boardElement.appendChild(cell);
                }
            }
        }

        // –û–±—Ä–∞–±–æ—Ç–∫–∞ –∫–ª–∏–∫–∞ –ø–æ —è—á–µ–π–∫–µ
        function handleCellClick(row, col) {
            if (gameBoard[row][col].player !== 0 && gameBoard[row][col].player !== currentPlayer) {
                return; // –Ø—á–µ–π–∫–∞ –∑–∞–Ω—è—Ç–∞ –¥—Ä—É–≥–∏–º –∏–≥—Ä–æ–∫–æ–º
            }
            
            placeAtom(row, col, currentPlayer);
            renderBoard();
            
            // –ê–Ω–∏–º–∞—Ü–∏—è –±—Ä–æ—Å–∫–∞ –∫—É–±–∏–∫–∞
            const diceElement = document.getElementById('diceThrow');
            diceElement.textContent = 'üé≤';
            setTimeout(() => {
                diceElement.textContent = '';
            }, 1000);
            
            // –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–±–µ–¥—ã
            if (checkWin()) {
                handleWin(currentPlayer);
                return;
            }
            
            // –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –∏–≥—Ä–æ–∫–∞
            currentPlayer = currentPlayer === 1 ? 2 : 1;
            
            // –ï—Å–ª–∏ –∏–≥—Ä–∞ —Å –±–æ—Ç–æ–º, –¥–µ–ª–∞–µ–º —Ö–æ–¥ –±–æ—Ç–∞
            if (gameMode === 'bot' && currentPlayer === 2) {
                setTimeout(makeBotMove, 1000);
            }
        }

        // –†–∞–∑–º–µ—â–µ–Ω–∏–µ –∞—Ç–æ–º–∞
        function placeAtom(row, col, player) {
            gameBoard[row][col].player = player;
            gameBoard[row][col].count++;
            
            // –ï—Å–ª–∏ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∞—Ç–æ–º–æ–≤ –¥–æ—Å—Ç–∏–≥–ª–æ –ø—Ä–µ–¥–µ–ª–∞, –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –≤–∑—Ä—ã–≤
            if (gameBoard[row][col].count >= getMaxAtoms(row, col)) {
                explode(row, col, player);
            }
        }

        // –ü–æ–ª—É—á–µ–Ω–∏–µ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–≥–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –∞—Ç–æ–º–æ–≤ –¥–ª—è —è—á–µ–π–∫–∏
        function getMaxAtoms(row, col) {
            if (row === 0 || row === 4 || col === 0 || col === 4) {
                if ((row === 0 && col === 0) || (row === 0 && col === 4) || (row === 4 && col === 0) || (row === 4 && col === 4)) {
                    return 2; // –£–≥–ª–æ–≤—ã–µ —è—á–µ–π–∫–∏
                }
                return 3; // –ö—Ä–∞–π–Ω–∏–µ —è—á–µ–π–∫–∏
            }
            return 4; // –¶–µ–Ω—Ç—Ä–∞–ª—å–Ω—ã–µ —è—á–µ–π–∫–∏
        }

        // –í–∑—Ä—ã–≤ –∞—Ç–æ–º–∞
        function explode(row, col, player) {
            gameBoard[row][col].count = 0;
            gameBoard[row][col].player = 0;
            
            // –†–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –≤–∑—Ä—ã–≤–∞ –Ω–∞ —Å–æ—Å–µ–¥–Ω–∏–µ —è—á–µ–π–∫–∏
            const directions = [
                [-1, 0], [1, 0], [0, -1], [0, 1] // –≤–≤–µ—Ä—Ö, –≤–Ω–∏–∑, –≤–ª–µ–≤–æ, –≤–ø—Ä–∞–≤–æ
            ];
            
            for (const [dr, dc] of directions) {
                const newRow = row + dr;
                const newCol = col + dc;
                
                if (newRow >= 0 && newRow < 5 && newCol >= 0 && newCol < 5) {
                    placeAtom(newRow, newCol, player);
                }
            }
        }

        // –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–±–µ–¥—ã
        function checkWin() {
            let players = new Set();
            for (let row = 0; row < 5; row++) {
                for (let col = 0; col < 5; col++) {
                    if (gameBoard[row][col].player !== 0) {
                        players.add(gameBoard[row][col].player);
                    }
                }
            }
            return players.size === 1 && players.has(currentPlayer);
        }

        // –û–±—Ä–∞–±–æ—Ç–∫–∞ –ø–æ–±–µ–¥—ã
        function handleWin(winner) {
            const winMessage = document.getElementById('winMessage');
            if (winner === 1) {
                winMessage.textContent = '–ü–æ–∑–¥—Ä–∞–≤–ª—è–µ–º! –í—ã –≤—ã–∏–≥—Ä–∞–ª–∏!';
                
                // –û–±–Ω–æ–≤–ª—è–µ–º —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É
                if (gameMode === 'rating') {
                    playerStats.rating += 25;
                    playerStats.seasonWins++;
                    playerStats.matchesThisSeason++;
                }
                playerStats.wins++;
            } else {
                winMessage.textContent = '–ö —Å–æ–∂–∞–ª–µ–Ω–∏—é, –≤—ã –ø—Ä–æ–∏–≥—Ä–∞–ª–∏.';
                
                if (gameMode === 'rating') {
                    playerStats.rating = Math.max(0, playerStats.rating - 25);
                    playerStats.seasonLosses++;
                    playerStats.matchesThisSeason++;
                }
                playerStats.losses++;
            }
            
            saveUserData();
            showModal('winModal');
            
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º –∏ –æ–±–Ω–æ–≤–ª—è–µ–º –¥–∏–≤–∏–∑–∏–æ–Ω
            updateDivision();
        }

        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–∏–≤–∏–∑–∏–æ–Ω–∞
        function updateDivision() {
            if (playerStats.rating >= 1500) {
                playerStats.division = 'platinum';
            } else if (playerStats.rating >= 1200) {
                playerStats.division = 'gold';
            } else {
                playerStats.division = 'silver';
            }
            
            updateUserInterface();
            saveUserData();
        }

        // –•–æ–¥ –±–æ—Ç–∞
        function makeBotMove() {
            // –ü—Ä–æ—Å—Ç–∞—è –ª–æ–≥–∏–∫–∞ –±–æ—Ç–∞ - –≤—ã–±–∏—Ä–∞–µ–º —Å–ª—É—á–∞–π–Ω—É—é –¥–æ—Å—Ç—É–ø–Ω—É—é —è—á–µ–π–∫—É
            const availableCells = [];
            for (let row = 0; row < 5; row++) {
                for (let col = 0; col < 5; col++) {
                    if (gameBoard[row][col].player === 0 || gameBoard[row][col].player === 2) {
                        availableCells.push({ row, col });
                    }
                }
            }
            
            if (availableCells.length > 0) {
                const randomCell = availableCells[Math.floor(Math.random() * availableCells.length)];
                placeAtom(randomCell.row, randomCell.col, 2);
                renderBoard();
                
                // –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–±–µ–¥—ã
                if (checkWin()) {
                    handleWin(2);
                    return;
                }
                
                currentPlayer = 1;
            }
        }

        // –°–±—Ä–æ—Å –∏–≥—Ä—ã
        function resetGame() {
            document.getElementById('gameBoard').style.display = 'none';
            document.getElementById('matchmakingInfo').style.display = 'none';
        }

        // –ü–æ–∫–∞–∑–∞—Ç—å –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ
        function showModal(modalId) {
            document.getElementById(modalId).style.display = 'block';
        }

        // –ó–∞–∫—Ä—ã—Ç—å –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ
        function closeModal(modalId) {
            document.getElementById(modalId).style.display = 'none';
        }

        // –í—ã—Ö–æ–¥ –∏–∑ –∞–∫–∫–∞—É–Ω—Ç–∞
        function logout() {
            currentUser = null;
            document.getElementById('googleSignIn').style.display = 'block';
            document.getElementById('userInfo').style.display = 'none';
            localStorage.removeItem('reactorUser');
            showNotification('–í—ã –≤—ã—à–ª–∏ –∏–∑ –∞–∫–∫–∞—É–Ω—Ç–∞', 'info');
        }

        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç–∞–π–º–µ—Ä–∞ —Å–µ–∑–æ–Ω–∞
        function updateSeasonTimer() {
            const now = new Date();
            const timeLeft = seasonData.endTime - now;
            
            if (timeLeft <= 0) {
                endSeason();
                return;
            }
            
            const days = Math.floor(timeLeft / (1000 * 60 * 60 * 24));
            const hours = Math.floor((timeLeft % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
            const minutes = Math.floor((timeLeft % (1000 * 60 * 60)) / (1000 * 60));
            
            document.getElementById('seasonTimeLeft').textContent = `${days}–¥ ${hours}—á ${minutes}–º`;
            
            // –û–±–Ω–æ–≤–ª—è–µ–º –ø—Ä–æ–≥—Ä–µ—Å—Å –±–∞—Ä
            const totalTime = seasonData.endTime - seasonData.startTime;
            const elapsed = now - seasonData.startTime;
            const progress = (elapsed / totalTime) * 100;
            document.getElementById('seasonProgress').style.width = Math.min(progress, 100) + '%';
        }

        // –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ —Å–µ–∑–æ–Ω–∞
        function endSeason() {
            // –û–ø—Ä–µ–¥–µ–ª—è–µ–º –ø–æ–±–µ–¥–∏—Ç–µ–ª—è —Å–µ–∑–æ–Ω–∞ (–∏–≥—Ä–æ–∫ —Å highest —Ä–µ–π—Ç–∏–Ω–≥–æ–º)
            const allPlayers = JSON.parse(localStorage.getItem('allPlayerRatings') || '{}');
            let seasonWinner = { id: null, rating: 0 };
            
            // –û–±–Ω–æ–≤–ª—è–µ–º –¥–∞–Ω–Ω—ã–µ –≤—Å–µ—Ö –∏–≥—Ä–æ–∫–æ–≤
            if (currentUser) {
                allPlayers[currentUser.id] = playerStats.rating;
                localStorage.setItem('allPlayerRatings', JSON.stringify(allPlayers));
            }
            
            for (const [playerId, rating] of Object.entries(allPlayers)) {
                if (rating > seasonWinner.rating) {
                    seasonWinner = { id: playerId, rating: rating };
                }
            }
            
            seasonData.winners[seasonData.current] = seasonWinner.id;
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
            const seasonEndMessage = document.getElementById('seasonEndMessage');
            seasonEndMessage.textContent = `–°–µ–∑–æ–Ω ${seasonData.current} –∑–∞–≤–µ—Ä—à–µ–Ω! –ü–æ–∑–¥—Ä–∞–≤–ª—è–µ–º –ø–æ–±–µ–¥–∏—Ç–µ–ª—è —Å–µ–∑–æ–Ω–∞!`;
            
            // –ï—Å–ª–∏ —Ç–µ–∫—É—â–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–æ–±–µ–¥–∏–ª
            if (seasonData.winners[seasonData.current] === currentUser.id) {
                const seasonWinnerInfo = document.getElementById('seasonWinnerInfo');
                seasonWinnerInfo.innerHTML = '<p>üéâ –ü–æ–∑–¥—Ä–∞–≤–ª—è–µ–º! –í—ã —Å—Ç–∞–ª–∏ –ø–æ–±–µ–¥–∏—Ç–µ–ª–µ–º —Å–µ–∑–æ–Ω–∞! üéâ</p>';
                // –î–æ–±–∞–≤–ª—è–µ–º –ø–ª–∞—à–∫—É –ø–æ–±–µ–¥–∏—Ç–µ–ª—è —Å–µ–∑–æ–Ω–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é
                playerStats.seasonWinner = seasonData.current;
            }
            
            showModal('seasonEndModal');
            
            // –ù–∞—á–∏–Ω–∞–µ–º –Ω–æ–≤—ã–π —Å–µ–∑–æ–Ω
            seasonData.current++;
            seasonData.startTime = new Date();
            seasonData.endTime = new Date(Date.now() + 7 * 24 * 60 * 60 * 1000);
            
            // –°–±—Ä–∞—Å—ã–≤–∞–µ–º —Å–µ–∑–æ–Ω–Ω—É—é —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É, –Ω–æ —Å–æ—Ö—Ä–∞–Ω—è–µ–º —Ä–µ–π—Ç–∏–Ω–≥
            playerStats.seasonWins = 0;
            playerStats.seasonLosses = 0;
            playerStats.matchesThisSeason = 0;
            
            saveUserData();
        }

        // –ü–æ–∫–∞–∑–∞—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
        function showNotification(message, type = 'info') {
            const notification = document.createElement('div');
            notification.className = `notification ${type}`;
            notification.textContent = message;
            
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.remove();
            }, 3000);
        }

        // –ó–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
        window.onload = init;
    </script>
</body>
</html>
