<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>REACTOR ‚Äî –î–µ–º–æ</title>
  <style>
    body {
      margin: 0;
      padding: 0;
      background: #0d0d1a;
      color: white;
      font-family: 'Segoe UI', sans-serif;
      text-align: center;
      overflow: hidden;
    }

    .demo-banner {
      background: #ff3b30;
      color: white;
      padding: 8px;
      font-weight: bold;
      font-size: 14px;
      letter-spacing: 0.5px;
      text-shadow: 0 1px 2px rgba(0,0,0,0.3);
      position: relative;
      z-index: 30;
      text-align: center;
    }

    #top-ui {
      position: absolute;
      top: 42px;
      right: 12px;
      display: flex;
      gap: 12px;
      z-index: 20;
    }

    .icon-btn {
      width: 36px;
      height: 36px;
      border-radius: 50%;
      background: rgba(30, 30, 46, 0.7);
      border: 1px solid #4deeea;
      color: white;
      font-size: 16px;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      backdrop-filter: blur(4px);
      transition: all 0.2s ease;
      padding: 0;
    }

    .icon-btn:hover {
      background: rgba(77, 238, 234, 0.2);
      transform: scale(1.1);
      border-color: #4deeea;
    }

    .icon-btn:focus {
      outline: none;
    }

    .screen {
      display: none;
      width: 100vw;
      height: 100vh;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      padding: 20px;
      box-sizing: border-box;
      position: absolute;
      top: 0;
      left: 0;
    }
    .active { display: flex !important; }

    h1 {
      font-size: 32px;
      color: #4deeea;
      margin-bottom: 20px;
      z-index: 5;
    }

    .subtitle {
      font-size: 18px;
      color: #aaa;
      margin-bottom: 30px;
      max-width: 500px;
      line-height: 1.5;
    }

    .dice {
      width: 80px;
      height: 80px;
      background: #1e1e2e;
      border: 3px solid #555;
      border-radius: 16px;
      display: flex;
      justify-content: center;
      align-items: center;
      font-size: 40px;
      font-weight: bold;
      margin: 30px 0;
      z-index: 5;
      position: relative;
    }

    .dice.animate {
      animation: toss 2.2s cubic-bezier(0.3, 0.8, 0.5, 1) forwards;
    }

    @keyframes toss {
      0% { transform: translateY(0) rotate(0deg); opacity: 1; }
      30% { transform: translateY(-120px) rotate(180deg); }
      60% { transform: translateY(-60px) rotate(360deg); }
      80% { transform: translateY(-20px) rotate(540deg); }
      100% { transform: translateY(0) rotate(720deg); opacity: 1; }
    }

    button {
      padding: 10px 24px;
      background: #4deeea;
      border: none;
      border-radius: 8px;
      color: #000;
      font-weight: bold;
      font-size: 16px;
      cursor: pointer;
      margin-top: 20px;
      z-index: 5;
      position: relative;
    }

    #board {
      display: grid;
      grid-template-columns: repeat(7, 52px);
      grid-gap: 3px;
      margin: 16px auto;
      max-width: 380px;
    }
    .cell {
      width: 52px;
      height: 52px;
      border-radius: 6px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 22px;
      cursor: pointer;
      transition: transform 0.15s, background 0.2s;
      background: #1a1a2a;
    }
    .cell:hover { transform: scale(1.03); }
    .player1 { background: #1e3a8a; color: #bfdbfe; }
    .player2 { background: #991b1b; color: #fecaca; }
    .reactor::after { content: "‚óè"; font-size: 18px; }

    #status {
      margin: 14px 0;
      font-size: 18px;
      min-height: 24px;
      font-weight: bold;
    }

    #score {
      display: flex;
      justify-content: center;
      gap: 30px;
      margin: 8px 0;
      font-size: 15px;
    }
    .score-box {
      padding: 6px 16px;
      border-radius: 10px;
    }
    .you { border: 2px solid #4deeea; }
    .bot { border: 2px solid #ff6b6b; }

    #footer {
      margin: 20px auto;
      font-size: 12px;
      color: #666;
      max-width: 400px;
      line-height: 1.5;
    }

    .modal-overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100vw;
      height: 100vh;
      background: rgba(0, 0, 0, 0.7);
      backdrop-filter: blur(4px);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 100;
      opacity: 0;
      visibility: hidden;
      transition: opacity 0.3s, visibility 0.3s;
    }

    .modal-overlay.active {
      opacity: 1;
      visibility: visible;
    }

    .modal {
      background: #141424;
      border: 2px solid #4deeea;
      border-radius: 16px;
      padding: 24px;
      width: 90%;
      max-width: 400px;
      text-align: center;
      box-shadow: 0 0 20px rgba(77, 238, 234, 0.3);
      position: relative;
      transform: scale(0.9);
      transition: transform 0.3s ease;
    }

    .modal-overlay.active .modal {
      transform: scale(1);
    }

    .modal h2 {
      color: #4deeea;
      margin-top: 0;
      font-size: 22px;
    }

    .modal p {
      color: #ccc;
      margin: 16px 0;
      line-height: 1.5;
    }

    /* Changelog Accordions */
    .patch-entry {
      margin: 14px 0;
      border: 1px solid #333;
      border-radius: 10px;
      overflow: hidden;
      background: rgba(30, 30, 46, 0.3);
    }

    .patch-header {
      padding: 12px 16px;
      background: rgba(77, 238, 234, 0.1);
      color: #4deeea;
      font-weight: bold;
      font-size: 16px;
      cursor: pointer;
      display: flex;
      justify-content: space-between;
      align-items: center;
      transition: background 0.2s;
    }

    .patch-header:hover {
      background: rgba(77, 238, 234, 0.2);
    }

    .patch-arrow {
      width: 16px;
      height: 16px;
      transition: transform 0.3s ease;
      fill: #4deeea;
    }

    .patch-content {
      max-height: 0;
      overflow: hidden;
      transition: max-height 0.4s ease, padding 0.4s ease;
      background: rgba(20, 20, 36, 0.6);
      color: #ccc;
      padding: 0 16px;
    }

    .patch-content.open {
      max-height: 400px;
      padding: 16px;
    }

    .patch-content ul {
      text-align: left;
      padding-left: 20px;
      margin: 0;
      line-height: 1.6;
    }

    .patch-content li {
      margin-bottom: 6px;
    }

    /* Info Accordions */
    .info-section {
      margin: 14px 0;
      border: 1px solid #333;
      border-radius: 10px;
      overflow: hidden;
      background: rgba(30, 30, 46, 0.3);
    }

    .info-header {
      padding: 12px 16px;
      background: rgba(77, 238, 234, 0.1);
      color: #4deeea;
      font-weight: bold;
      font-size: 16px;
      cursor: pointer;
      display: flex;
      justify-content: space-between;
      align-items: center;
      transition: background 0.2s;
    }

    .info-header:hover {
      background: rgba(77, 238, 234, 0.2);
    }

    .info-arrow {
      width: 16px;
      height: 16px;
      transition: transform 0.3s ease;
      fill: #4deeea;
    }

    .info-content {
      max-height: 0;
      overflow: hidden;
      transition: max-height 0.4s ease, padding 0.4s ease;
      background: rgba(20, 20, 36, 0.6);
      color: #ccc;
      padding: 0 16px;
      text-align: left;
      line-height: 1.5;
    }

    .info-content.open {
      max-height: 400px;
      padding: 16px;
    }

    .info-content p {
      margin: 8px 0;
    }

    .close-modal {
      position: absolute;
      top: 12px;
      right: 12px;
      background: none;
      border: none;
      width: 24px;
      height: 24px;
      cursor: pointer;
      padding: 0;
      display: flex;
      align-items: center;
      justify-content: center;
      border-radius: 50%;
      transition: background 0.2s;
    }

    .close-modal:hover {
      background: rgba(255, 255, 255, 0.1);
    }

    .close-modal svg {
      width: 16px;
      height: 16px;
      fill: #aaa;
      transition: fill 0.2s;
    }

    .close-modal:hover svg {
      fill: white;
    }
  </style>
</head>
<body>
  <div class="demo-banner">
    –î–ï–ú–û-–í–ï–†–°–ò–Ø
  </div>

  <div id="top-ui">
    <button id="profile-btn" class="icon-btn" title="Profile">üë§</button>
    <button id="settings-btn" class="icon-btn" title="Settings">‚öôÔ∏è</button>
    <button id="changelog-btn" class="icon-btn" title="Changelog">üìñ</button>
    <button id="info-btn" class="icon-btn" title="Info">‚ùì</button>
  </div>

  <div id="main-menu" class="screen active">
    <h1>REACTOR</h1>
    <p class="subtitle">
      –î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ —Å—Ç—Ä–∞—Ç–µ–≥–∏—á–µ—Å–∫—É—é –∏–≥—Ä—É, –≥–¥–µ –∫–∞–∂–¥—ã–π —Ö–æ–¥ —Ä–µ—à–∞–µ—Ç –∏—Å—Ö–æ–¥ –±–∏—Ç–≤—ã –∑–∞ –∫–æ–Ω—Ç—Ä–æ–ª—å!<br>
      –ü–æ—Å—Ç—Ä–æ–π—Ç–µ —Ä–µ–∞–∫—Ç–æ—Ä—ã, –∑–∞—Ö–≤–∞—Ç—ã–≤–∞–π—Ç–µ –∫–ª–µ—Ç–∫–∏ –∏ –æ–±—ã–≥—Ä–∞–π—Ç–µ –±–æ—Ç–∞ –∑–∞ 14 —Ö–æ–¥–æ–≤.
    </p>
    <button onclick="goToStartScreen()">–ù–∞—á–∞—Ç—å –∏–≥—Ä—É</button>
  </div>

  <div id="start-screen" class="screen">
    <h1>REACTOR</h1>
    <p>–ö—Ç–æ –Ω–∞—á–Ω—ë—Ç –ø–µ—Ä–≤—ã–º?</p>
    <div class="dice" id="dice">?</div>
    <button onclick="startToss()">–ü–æ–¥–±—Ä–æ—Å–∏—Ç—å –∫—É–±–∏–∫</button>
  </div>

  <div id="game-screen" class="screen">
    <h1>REACTOR</h1>
    <div id="score">
      <div class="score-box you">–¢—ã: <span id="you-score">0</span></div>
      <div class="score-box bot">–ë–æ—Ç: <span id="bot-score">0</span></div>
    </div>
    <div id="status">–û–∂–∏–¥–∞–Ω–∏–µ –Ω–∞—á–∞–ª–∞...</div>
    <div id="board"></div>
    <div id="controls">
      <button onclick="resetToStart()">–ù–æ–≤–∞—è –∏–≥—Ä–∞</button>
    </div>
    <div id="footer">
      –ö–∞–∂–¥—ã–π —Ä–µ–∞–∫—Ç–æ—Ä (‚óè) –ø–µ—Ä–µ–∫—Ä–∞—à–∏–≤–∞–µ—Ç —Å–æ—Å–µ–¥–Ω–∏–µ –∫–ª–µ—Ç–∫–∏.<br>
      –ü–æ—Å–ª–µ 14 —Ö–æ–¥–æ–≤ –ø–æ–±–µ–∂–¥–∞–µ—Ç –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É—é—â–∏–π –±–æ–ª—å—à–µ.
    </div>
  </div>

  <!-- üë§ –ü—Ä–æ—Ñ–∏–ª—å -->
  <div id="profile-modal" class="modal-overlay">
    <div class="modal">
      <button class="close-modal" onclick="closeModal('profile-modal')">
        <svg viewBox="0 0 24 24">
          <path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/>
        </svg>
      </button>
      <h2>Profile</h2>
      <p>Soon</p>
    </div>
  </div>

  <!-- ‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏ -->
  <div id="settings-modal" class="modal-overlay">
    <div class="modal">
      <button class="close-modal" onclick="closeModal('settings-modal')">
        <svg viewBox="0 0 24 24">
          <path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/>
        </svg>
      </button>
      <h2>Settings</h2>
      <p>Soon</p>
    </div>
  </div>

  <!-- üìñ Changelog -->
  <div id="changelog-modal" class="modal-overlay">
    <div class="modal">
      <button class="close-modal" onclick="closeModal('changelog-modal')">
        <svg viewBox="0 0 24 24">
          <path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/>
        </svg>
      </button>
      <h2>Changelog</h2>

      <!-- v0.2.1 ‚Äî –Ω–æ–≤—ã–π -->
      <div class="patch-entry">
        <div class="patch-header" onclick="togglePatch('patch-021')">
          v0.2.1
          <svg class="patch-arrow" id="arrow-021" viewBox="0 0 24 24">
            <path d="M7.41 8.59L12 13.17l4.59-4.58L18 10l-6 6-6-6 1.41-1.41z"/>
          </svg>
        </div>
        <div class="patch-content" id="patch-021">
          <ul>
            <li><strong>–î–æ–±–∞–≤–ª–µ–Ω–æ:</strong></li>
            <li>‚Ä¢ –ü–æ–ª–µ —É–≤–µ–ª–∏—á–µ–Ω–æ –¥–æ <strong>7√ó7</strong></li>
            <li>‚Ä¢ –í—Å–µ–≥–æ —Ö–æ–¥–æ–≤: <strong>14</strong> (–ø–æ 7 –Ω–∞ –∏–≥—Ä–æ–∫–∞)</li>
            <li>‚Ä¢ –ü–µ—Ä–µ–±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∞–Ω –ò–ò –ø–æ–¥ –Ω–æ–≤–æ–µ –ø–æ–ª–µ</li>
            <li><strong>–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ:</strong></li>
            <li>‚Ä¢ –†–∞–Ω–¥–æ–º –ø–µ—Ä–≤–æ–≥–æ —Ö–æ–¥–∞ –±–æ–ª—å—à–µ –Ω–µ —Ä–µ—à–∞–µ—Ç –∏—Å—Ö–æ–¥</li>
            <li>‚Ä¢ –¢–∞–∫—Ç–∏–∫–∞ –∑–∞–º–µ–Ω—è–µ—Ç —É–≥–∞–¥—ã–≤–∞–Ω–∏–µ</li>
          </ul>
        </div>
      </div>

      <!-- v0.2 -->
      <div class="patch-entry">
        <div class="patch-header" onclick="togglePatch('patch-02')">
          v0.2
          <svg class="patch-arrow" id="arrow-02" viewBox="0 0 24 24">
            <path d="M7.41 8.59L12 13.17l4.59-4.58L18 10l-6 6-6-6 1.41-1.41z"/>
          </svg>
        </div>
        <div class="patch-content" id="patch-02">
          <ul>
            <li><strong>–î–æ–±–∞–≤–ª–µ–Ω–æ:</strong></li>
            <li>‚Ä¢ –ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–π –ò–ò-–±–æ—Ç: –∞–Ω–∞–ª–∏–∑ —É–≥—Ä–æ–∑, —Ñ–∞–∑—ã –∏–≥—Ä—ã, —Å–∏–º—É–ª—è—Ü–∏—è –æ—Ç–≤–µ—Ç–∞</li>
            <li>‚Ä¢ –ö–Ω–æ–ø–∫–∏: –ü—Ä–æ—Ñ–∏–ª—å, –ù–∞—Å—Ç—Ä–æ–π–∫–∏, Changelog, Info</li>
            <li>‚Ä¢ –ú–æ–¥–∞–ª—å–Ω—ã–µ –æ–∫–Ω–∞ –≤–º–µ—Å—Ç–æ alert()</li>
            <li>‚Ä¢ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–µ —Å–æ–≥–ª–∞—à–µ–Ω–∏–µ –∏ –∞–≤—Ç–æ—Ä—Å—Ç–≤–æ</li>
            <li><strong>–£–ª—É—á—à–µ–Ω–æ:</strong></li>
            <li>‚Ä¢ –î–∏–∑–∞–π–Ω, —á–∏—Ç–∞–µ–º–æ—Å—Ç—å, –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å</li>
            <li><strong>–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ:</strong></li>
            <li>‚Ä¢ –ë–æ—Ç –≤—Å–µ–≥–¥–∞ –¥–µ–ª–∞–ª –æ–¥–∏–Ω –∏ —Ç–æ—Ç –∂–µ —Ö–æ–¥</li>
            <li>‚Ä¢ –ò–∫–æ–Ω–∫–∏ –∑–∞–ª–∞–∑–∏–ª–∏ –Ω–∞ –±–∞–Ω–Ω–µ—Ä</li>
            <li>‚Ä¢ –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ —Ñ—Ä–∞–∑—ã –≤ changelog</li>
          </ul>
        </div>
      </div>

      <!-- v0.1 ‚Äî –∞—Ä—Ö–∏–≤ -->
      <div class="patch-entry">
        <div class="patch-header" onclick="togglePatch('patch-01')">
          v0.1
          <svg class="patch-arrow" id="arrow-01" viewBox="0 0 24 24">
            <path d="M7.41 8.59L12 13.17l4.59-4.58L18 10l-6 6-6-6 1.41-1.41z"/>
          </svg>
        </div>
        <div class="patch-content" id="patch-01">
          <ul>
            <li>‚Ä¢ –î–æ–±–∞–≤–ª–µ–Ω–æ –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é –∏ —ç–∫—Ä–∞–Ω –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –ø–µ—Ä–≤–æ–≥–æ —Ö–æ–¥–∞</li>
            <li>‚Ä¢ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –∏–≥—Ä–æ–≤–∞—è –º–µ—Ö–∞–Ω–∏–∫–∞: —Ä–µ–∞–∫—Ç–æ—Ä—ã, –∑–∞—Ö–≤–∞—Ç –∫–ª–µ—Ç–æ–∫, 10 —Ö–æ–¥–æ–≤</li>
            <li>‚Ä¢ –î–æ–±–∞–≤–ª–µ–Ω –ò–ò-–±–æ—Ç —Å –±–∞–∑–æ–≤–æ–π —Å—Ç—Ä–∞—Ç–µ–≥–∏–µ–π</li>
            <li>‚Ä¢ –í–≤–µ–¥–µ–Ω—ã —Ä–∞–∑–¥–µ–ª—ã: –ü—Ä–æ—Ñ–∏–ª—å, –ù–∞—Å—Ç—Ä–æ–π–∫–∏, –ò—Å—Ç–æ—Ä–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π</li>
          </ul>
        </div>
      </div>
    </div>
  </div>

  <!-- ‚ùì Info -->
  <div id="info-modal" class="modal-overlay">
    <div class="modal">
      <button class="close-modal" onclick="closeModal('info-modal')">
        <svg viewBox="0 0 24 24">
          <path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/>
        </svg>
      </button>
      <h2>Info</h2>

      <div class="info-section">
        <div class="info-header" onclick="toggleInfo('rules')">
          –ü—Ä–∞–≤–∏–ª–∞ –∏–≥—Ä—ã
          <svg class="info-arrow" id="arrow-rules" viewBox="0 0 24 24">
            <path d="M7.41 8.59L12 13.17l4.59-4.58L18 10l-6 6-6-6 1.41-1.41z"/>
          </svg>
        </div>
        <div class="info-content" id="rules">
          <p>‚Ä¢ –ò–≥—Ä–æ–≤–æ–µ –ø–æ–ª–µ: <strong>7√ó7 –∫–ª–µ—Ç–æ–∫</strong>.</p>
          <p>‚Ä¢ –í—Å–µ–≥–æ <strong>14 —Ö–æ–¥–æ–≤</strong> (–ø–æ 7 –Ω–∞ –∏–≥—Ä–æ–∫–∞).</p>
          <p>‚Ä¢ –ü—Ä–∏ —É—Å—Ç–∞–Ω–æ–≤–∫–µ —Ä–µ–∞–∫—Ç–æ—Ä–∞ (‚óè) –≤—ã –∑–∞—Ö–≤–∞—Ç—ã–≤–∞–µ—Ç–µ:</p>
          <p style="padding-left: 20px;">‚Äî –∫–ª–µ—Ç–∫—É —Å —Ä–µ–∞–∫—Ç–æ—Ä–æ–º,</p>
          <p style="padding-left: 20px;">‚Äî –≤—Å–µ 4 —Å–æ—Å–µ–¥–Ω–∏–µ –∫–ª–µ—Ç–∫–∏ (–≤–≤–µ—Ä—Ö, –≤–Ω–∏–∑, –≤–ª–µ–≤–æ, –≤–ø—Ä–∞–≤–æ).</p>
          <p>‚Ä¢ –ü–æ–±–µ–∂–¥–∞–µ—Ç –∏–≥—Ä–æ–∫, –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É—é—â–∏–π –±–æ–ª—å—à–µ –∫–ª–µ—Ç–æ–∫ –ø–æ—Å–ª–µ 14 —Ö–æ–¥–æ–≤.</p>
        </div>
      </div>

      <div class="info-section">
        <div class="info-header" onclick="toggleInfo('agreement')">
          –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–µ —Å–æ–≥–ª–∞—à–µ–Ω–∏–µ
          <svg class="info-arrow" id="arrow-agreement" viewBox="0 0 24 24">
            <path d="M7.41 8.59L12 13.17l4.59-4.58L18 10l-6 6-6-6 1.41-1.41z"/>
          </svg>
        </div>
        <div class="info-content" id="agreement">
          <p>‚Ä¢ –î–∞–Ω–Ω–∞—è –¥–µ–º–æ-–≤–µ—Ä—Å–∏—è –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç—Å—è ¬´–∫–∞–∫ –µ—Å—Ç—å¬ª.</p>
          <p>‚Ä¢ –ê–≤—Ç–æ—Ä –Ω–µ –Ω–µ—Å—ë—Ç –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏ –∑–∞ —É—â–µ—Ä–±, —É–±—ã—Ç–∫–∏ –∏–ª–∏ –ª—é–±—ã–µ –ø–æ—Å–ª–µ–¥—Å—Ç–≤–∏—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –∏–≥—Ä—ã.</p>
          <p>‚Ä¢ –ò–≥—Ä–∞ –Ω–µ —Å–æ–±–∏—Ä–∞–µ—Ç –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ. –ù–µ—Ç –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç—É.</p>
          <p>‚Ä¢ –í—Å–µ –ø—Ä–∞–≤–∞ –∑–∞—â–∏—â–µ–Ω—ã. –ó–∞–ø—Ä–µ—â–µ–Ω–æ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –±–µ–∑ —Å–æ–≥–ª–∞—Å–∏—è –∞–≤—Ç–æ—Ä–∞.</p>
        </div>
      </div>

      <div class="info-section">
        <div class="info-header" onclick="toggleInfo('about')">
          –û –ø—Ä–æ–µ–∫—Ç–µ
          <svg class="info-arrow" id="arrow-about" viewBox="0 0 24 24">
            <path d="M7.41 8.59L12 13.17l4.59-4.58L18 10l-6 6-6-6 1.41-1.41z"/>
          </svg>
        </div>
        <div class="info-content" id="about">
          <p>–ò–≥—Ä–∞ <strong>REACTOR</strong> —Å–æ–∑–¥–∞–Ω–∞ –∏ –ø—Ä–∏–Ω–∞–¥–ª–µ–∂–∏—Ç <strong>G3laZi Project</strong>.</p>
          <p>–í–µ—Ä—Å–∏—è: v0.2.1 (–¥–µ–º–æ)</p>
          <p>¬© 2025 G3laZi Project. –í—Å–µ –ø—Ä–∞–≤–∞ –∑–∞—â–∏—â–µ–Ω—ã.</p>
          <p>–û—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–π —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π: <em>—Å–∫–æ—Ä–æ –Ω–∞ GitHub</em></p>
        </div>
      </div>
    </div>
  </div>

  <script>
    const SIZE = 7;          // ‚úÖ 7√ó7
    const TOTAL_MOVES = 14;  // ‚úÖ 14 —Ö–æ–¥–æ–≤
    let board, reactors, moveCount, gameActive, currentPlayer;

    function goToStartScreen() {
      document.getElementById('main-menu').classList.remove('active');
      document.getElementById('start-screen').classList.add('active');
    }

    function startToss() {
      const dice = document.getElementById('dice');
      dice.textContent = '?';
      dice.className = 'dice animate';

      setTimeout(() => {
        const firstPlayer = Math.random() > 0.5 ? 'human' : 'bot';
        dice.textContent = firstPlayer === 'human' ? 'üë§' : 'ü§ñ';
        dice.style.color = firstPlayer === 'human' ? '#4deeea' : '#ff6b6b';
        dice.classList.remove('animate');

        setTimeout(() => {
          document.getElementById('start-screen').classList.remove('active');
          document.getElementById('game-screen').classList.add('active');
          initGame(firstPlayer);
        }, 600);
      }, 2200);
    }

    function initGame(firstPlayer) {
      board = Array(SIZE).fill().map(() => Array(SIZE).fill(0));
      reactors = Array(SIZE).fill().map(() => Array(SIZE).fill(false));
      moveCount = 0;
      gameActive = true;
      currentPlayer = firstPlayer;

      const statusEl = document.getElementById('status');
      if (currentPlayer === 'human') {
        statusEl.textContent = '–¢–≤–æ–π —Ö–æ–¥ ‚Äî –ø–æ—Å—Ç–∞–≤—å —Ä–µ–∞–∫—Ç–æ—Ä';
      } else {
        statusEl.textContent = '–ë–æ—Ç —Ö–æ–¥–∏—Ç –ø–µ—Ä–≤—ã–º...';
        render();
        setTimeout(botMove, 800);
      }
      render();
    }

    function render() {
      const boardEl = document.getElementById('board');
      boardEl.innerHTML = '';
      let youScore = 0, botScore = 0;

      for (let r = 0; r < SIZE; r++) {
        for (let c = 0; c < SIZE; c++) {
          const cell = document.createElement('div');
          cell.className = 'cell';
          if (board[r][c] === 1) {
            cell.classList.add('player1');
            youScore++;
          } else if (board[r][c] === 2) {
            cell.classList.add('player2');
            botScore++;
          }
          if (reactors[r][c]) cell.classList.add('reactor');

          if (gameActive && board[r][c] === 0 && moveCount < TOTAL_MOVES && currentPlayer === 'human') {
            cell.onclick = () => playerMove(r, c);
          }
          boardEl.appendChild(cell);
        }
      }

      document.getElementById('you-score').textContent = youScore;
      document.getElementById('bot-score').textContent = botScore;

      if (moveCount >= TOTAL_MOVES && gameActive) {
        gameActive = false;
        const statusEl = document.getElementById('status');
        if (youScore > botScore) statusEl.textContent = 'üèÜ –ü–æ–±–µ–¥–∞!';
        else if (botScore > youScore) statusEl.textContent = 'üíî –ü–æ—Ä–∞–∂–µ–Ω–∏–µ.';
        else statusEl.textContent = 'ü§ù –ù–∏—á—å—è!';
      }
    }

    function activateReactor(row, col, player) {
      reactors[row][col] = true;
      board[row][col] = player;
      const dirs = [[-1,0], [1,0], [0,-1], [0,1]];
      for (const [dr, dc] of dirs) {
        const nr = row + dr, nc = col + dc;
        if (nr >= 0 && nr < SIZE && nc >= 0 && nc < SIZE) {
          board[nr][nc] = player;
        }
      }
    }

    function playerMove(r, c) {
      if (!gameActive || currentPlayer !== 'human' || board[r][c] !== 0) return;
      activateReactor(r, c, 1);
      moveCount++;
      currentPlayer = 'bot';
      if (moveCount < TOTAL_MOVES) {
        document.getElementById('status').textContent = '–•–æ–¥ –±–æ—Ç–∞...';
        render();
        setTimeout(botMove, 600);
      } else {
        render();
      }
    }

    // ‚úÖ –ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–π –±–æ—Ç –ø–æ–¥ 7√ó7
    function botMove() {
      if (!gameActive || currentPlayer !== 'bot') return;

      const phase = moveCount < 5 ? 'early' : moveCount < 10 ? 'mid' : 'late';
      let moves = [];
      const dirs = [[-1,0],[1,0],[0,-1],[0,1]];

      for (let r = 0; r < SIZE; r++) {
        for (let c = 0; c < SIZE; c++) {
          if (board[r][c] !== 0) continue;

          let baseValue = 0;
          for (const [dr, dc] of dirs) {
            const nr = r + dr, nc = c + dc;
            if (nr >= 0 && nr < SIZE && nc >= 0 && nc < SIZE) {
              if (board[nr][nc] === 1) baseValue += 10;
              else if (board[nr][nc] === 0) baseValue += 4;
              else if (board[nr][nc] === 2) baseValue += 1;
            }
          }
          // –¶–µ–Ω—Ç—Ä 3√ó3 = (2,2) to (4,4) ‚Üí –±–æ–Ω—É—Å
          if (phase === 'early' && r >= 2 && r <= 4 && c >= 2 && c <= 4) {
            baseValue += 4;
          }

          let threatValue = 0;
          for (const [dr, dc] of dirs) {
            const nr = r + dr, nc = c + dc;
            if (nr >= 0 && nr < SIZE && nc >= 0 && nc < SIZE && board[nr][nc] === 1) {
              let futureDamage = 0;
              for (const [dr2, dc2] of dirs) {
                const nnr = nr + dr2, nnc = nc + dc2;
                if (nnr >= 0 && nnr < SIZE && nnc >= 0 && nnc < SIZE) {
                  if (board[nnr][nnc] === 2) futureDamage++;
                }
              }
              threatValue = Math.max(threatValue, futureDamage * 5);
            }
          }

          let opponentResponseValue = 0;
          const simBoard = board.map(row => [...row]);
          simBoard[r][c] = 2;
          for (const [dr, dc] of dirs) {
            const nr = r + dr, nc = c + dc;
            if (nr >= 0 && nr < SIZE && nc >= 0 && nc < SIZE) {
              simBoard[nr][nc] = 2;
            }
          }
          let bestOpponentValue = 0;
          for (let or = 0; or < SIZE; or++) {
            for (let oc = 0; oc < SIZE; oc++) {
              if (simBoard[or][oc] === 0) {
                let val = 0;
                for (const [dr, dc] of dirs) {
                  const nnr = or + dr, nnc = oc + dc;
                  if (nnr >= 0 && nnr < SIZE && nnc >= 0 && nnc < SIZE) {
                    if (simBoard[nnr][nnc] === 2) val += 10;
                    else if (simBoard[nnr][nnc] === 0) val += 4;
                  }
                }
                bestOpponentValue = Math.max(bestOpponentValue, val);
              }
            }
          }
          opponentResponseValue = -bestOpponentValue * 0.7;

          let totalValue = baseValue + threatValue + opponentResponseValue;
          totalValue += (Math.random() - 0.5) * 2;

          moves.push({ r, c, value: totalValue });
        }
      }

      if (moves.length === 0) return;

      moves.sort((a, b) => b.value - a.value);
      const topMoves = moves.slice(0, 2);
      const chosen = topMoves[Math.floor(Math.random() * topMoves.length)];

      activateReactor(chosen.r, chosen.c, 2);
      moveCount++;
      currentPlayer = 'human';
      if (moveCount < TOTAL_MOVES) {
        document.getElementById('status').textContent = '–¢–≤–æ–π —Ö–æ–¥ ‚Äî –ø–æ—Å—Ç–∞–≤—å —Ä–µ–∞–∫—Ç–æ—Ä';
      }
      render();
    }

    function resetToStart() {
      document.getElementById('game-screen').classList.remove('active');
      document.getElementById('start-screen').classList.add('active');
    }

    function closeModal(modalId) {
      document.getElementById(modalId).classList.remove('active');
    }

    function togglePatch(patchId) {
      const content = document.getElementById(patchId);
      const arrowId = `arrow-${patchId.split('-')[1]}`;
      const arrow = document.getElementById(arrowId);
      content.classList.toggle('open');
      if (content.classList.contains('open')) {
        arrow.style.transform = 'rotate(180deg)';
      } else {
        arrow.style.transform = 'rotate(0deg)';
      }
    }

    function toggleInfo(sectionId) {
      const content = document.getElementById(sectionId);
      const arrow = document.getElementById(`arrow-${sectionId}`);
      content.classList.toggle('open');
      if (content.classList.contains('open')) {
        arrow.style.transform = 'rotate(180deg)';
      } else {
        arrow.style.transform = 'rotate(0deg)';
      }
    }

    document.getElementById('profile-btn').onclick = () => {
      document.getElementById('profile-modal').classList.add('active');
    };
    document.getElementById('settings-btn').onclick = () => {
      document.getElementById('settings-modal').classList.add('active');
    };
    document.getElementById('changelog-btn').onclick = () => {
      document.getElementById('changelog-modal').classList.add('active');
    };
    document.getElementById('info-btn').onclick = () => {
      document.getElementById('info-modal').classList.add('active');
    };

    document.querySelectorAll('.modal-overlay').forEach(overlay => {
      overlay.addEventListener('click', (e) => {
        if (e.target === overlay) {
          overlay.classList.remove('active');
        }
      });
    });
  </script>
</body>
</html>
